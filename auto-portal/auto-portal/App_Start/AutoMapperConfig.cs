using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
using auto_portal.Models;
using auto_portal.ViewModel;
using auto_portal.ViewModel.CarRegister;
using AutoMapper;

namespace auto_portal
{
    public static class AutoMapperConfig
    {
        public static void Configure()
        {
            Mapper.Initialize(
                config =>
                {
                    config.CreateMap<Vehicle, AddEditCarRegisterViewModel>()
                    .ForMember(dest=>dest.ProductionYears, 
                    opts=>{opts.MapFrom(q=> 
                    Enumerable.Range(q.ProductionStartYear, q.ProductionEndYear-q.ProductionStartYear+1)
                    .Select(c=> new SelectListItem
                    {
                        Text = c.ToString(),
                        Value = c.ToString()
                    }).ToList())
                    ;});
                });
        }
    }
}